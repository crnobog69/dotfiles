#!/bin/bash

# –î–µ—Ñ–∏–Ω–∏—Å–∞—ö–µ –ø–æ—á–µ—Ç–Ω–æ–≥ –¥–∞—Ç—É–º–∞ —Ä–∞–¥–∞ (01.10.2024.)
pocetak_rada="2024-10-01"

# –ü—Ä–µ—Ç–≤–∞—Ä–∞—ö–µ —Ç—Ä–µ–Ω—É—Ç–Ω–æ–≥ –¥–∞—Ç—É–º–∞ —É —Ñ–æ—Ä–º–∞—Ç –ì–ì–ì–ì-–ú–ú-–î–î
datum_danas=$(date +%Y-%m-%d)

# –ò–∑—Ä–∞—á—É–Ω–∞–≤–∞—ö–µ —Ä–∞–∑–ª–∏–∫–µ —É –¥–∞–Ω–∏–º–∞ –∏–∑–º–µ—í—É –¥–∞–Ω–∞—à—ö–µ–≥ –¥–∞—Ç—É–º–∞ –∏ –ø–æ—á–µ—Ç–∫–∞ —Ä–∞–¥–∞
razlika_dana=$(( ( $(date -d "$datum_danas" +%s) - $(date -d "$pocetak_rada" +%s) ) / 86400 ))

# –ò–∑—Ä–∞—á—É–Ω–∞–≤–∞—ö–µ —Ä–∞–∑–ª–∏–∫–µ —É –Ω–µ–¥–µ—ô–∞–º–∞ (6 —Ä–∞–¥–Ω–∏—Ö –¥–∞–Ω–∞)
razlika_nedelja=$(( razlika_dana / 6 ))

# –ò–∑—Ä–∞—á—É–Ω–∞–≤–∞—ö–µ –ø–æ—á–µ—Ç–∫–∞ —Ç—Ä–µ–Ω—É—Ç–Ω–µ —Ä–∞–¥–Ω–µ –Ω–µ–¥–µ—ô–µ
pocetak_tekuca_nedelja=$(date -d "$pocetak_rada + $((razlika_nedelja * 6)) days" "+%d. %B")
dan_pocetak=$(date -d "$pocetak_rada + $((razlika_nedelja * 6)) days" "+%A")

# –ò–∑—Ä–∞—á—É–Ω–∞–≤–∞—ö–µ –∫—Ä–∞—ò–∞ —Ç—Ä–µ–Ω—É—Ç–Ω–µ —Ä–∞–¥–Ω–µ –Ω–µ–¥–µ—ô–µ (5 –¥–∞–Ω–∞ –Ω–∞–∫–æ–Ω –ø–æ—á–µ—Ç–∫–∞)
kraj_tekuca_nedelja=$(date -d "$pocetak_rada + $((razlika_nedelja * 6 + 5)) days" "+%d. %B")
dan_kraj=$(date -d "$pocetak_rada + $((razlika_nedelja * 6 + 5)) days" "+%A")

# –ò–∑—Ä–∞—á—É–Ω–∞–≤–∞—ö–µ –∏–º–µ–Ω–∞ –¥–∞–Ω–∞ –∑–∞ –¥–∞–Ω–∞—à—ö–∏ –¥–∞—Ç—É–º
dan_danas=$(date -d "$datum_danas" "+%A")

# –ë–æ—ò–µ
crvena='\033[0;31m'    # –¶—Ä–≤–µ–Ω–∞
plava='\033[0;34m'     # –ü–ª–∞–≤–∞
zelena='\033[0;32m'    # –ó–µ–ª–µ–Ω–∞
zuta='\033[1;33m'      # –ñ—É—Ç–∞
reset='\033[0m'        # –†–µ—Å–µ—Ç–æ–≤–∞—ö–µ –±–æ—ò–µ

# –ü—Ä–æ–≤–µ—Ä–∞ –¥–∞ –ª–∏ —ò–µ —Ä–∞–∑–ª–∏–∫–∞ —É –Ω–µ–¥–µ—ô–∞–º–∞ –ø–∞—Ä–Ω–∞ –∏–ª–∏ –Ω–µ–ø–∞—Ä–Ω–∞ –∏ –¥–æ–¥–∞–≤–∞—ö–µ –±–æ—ò–µ
if (( razlika_nedelja % 2 == 0 )); then
    nedelja_tip="${plava}‚ùÑÔ∏è –ù–µ–ø–∞—Ä–Ω–∞ –Ω–µ–¥–µ—ô–∞${reset}"
else
    nedelja_tip="${crvena}üóº –ü–∞—Ä–Ω–∞ –Ω–µ–¥–µ—ô–∞${reset}"
fi

# –ò—Å–ø–∏—Å –ø–µ—Ä–∏–æ–¥–∞ —Ç—Ä–µ–Ω—É—Ç–Ω–µ –Ω–µ–¥–µ—ô–µ
echo -e "–¢—Ä–µ–Ω—É—Ç–Ω–∞ –Ω–µ–¥–µ—ô–∞ —Ç—Ä–∞—ò–µ –æ–¥ ${zelena}‚òÄÔ∏è $dan_pocetak, $pocetak_tekuca_nedelja${reset} –¥–æ ${zelena}üåô $dan_kraj, $kraj_tekuca_nedelja.${reset}"

# –ò—Å–ø–∏—Å –¥–∞—Ç—É–º–∞
echo -e "–î–∞—Ç—É–º ${zuta}üóìÔ∏è $dan_danas, $(date "+%d. %B %Y.") ${reset}—ò–µ $nedelja_tip."
